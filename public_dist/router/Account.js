let requestIp=require("request-ip"),{Register,Experience,Login,Logout,IdSearch,PwSearch,PwChange,Withdrawal}=require("../api/api.account"),{GetToken,RequestToId}=require("../api/api.auth"),dataDecrypt=require("../util/crpyto").dataDecrypt,router=require("express").Router();router.post("/api/account/register",async(t,a)=>{try{var e=t.body.data,r=dataDecrypt(e),c=await Register(r);a.status(200).send(c)}catch(t){a.status(400).send(t)}}),router.post("/api/account/experience",async(t,a)=>{try{console.log("requestIp",requestIp.getClientIp(t));var e=t.body.data,r=dataDecrypt(e),c=await Experience(r);a.status(200).send(c)}catch(t){a.status(400).send(t)}}),router.post("/api/account/login",async(t,a)=>{try{var e=t.body.data,{id:r,pw:c}=dataDecrypt(e),s=await Login(r,c);a.status(200).send(s)}catch(t){a.status(400).send(t)}}),router.post("/api/account/idSearch",async(t,a)=>{try{var e=t.body.data,r=dataDecrypt(e),c=await IdSearch(r);a.status(200).send(c)}catch(t){}}),router.post("/api/account/pwSearch",async(t,a)=>{try{var e=t.body.data,r=dataDecrypt(e),c=await PwSearch(r);console.log("result",c),a.status(200).send(c)}catch(t){}}),router.post("/api/account/pwChange",async(t,a)=>{try{var e=t.body.data,r=dataDecrypt(e),c=await PwChange(r);a.status(200).send(c)}catch(t){console.log("err",t)}}),router.get("/api/account/logout",async(t,a)=>{try{var e=GetToken(t),r=await Logout(e);a.status(200).send(r)}catch(t){}}),router.get("/api/account/withdrawal",async(t,a)=>{try{var e=RequestToId(t),r=await Withdrawal(e);a.status(200).send(r)}catch(t){}}),module.exports=router;// build date : 2024. 12. 18. 오후 2:28:53