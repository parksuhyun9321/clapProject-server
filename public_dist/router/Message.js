let router=require("express").Router(),RequestToId=require("../api/api.auth").RequestToId,{getMessage,readMessage,deleteMessage,postMessage}=require("../api/api.message"),dataDecrypt=require("../util/crpyto").dataDecrypt;router.get("/api/message/get",async(e,t)=>{try{var{offset:a,limit:s}=e.query,r=RequestToId(e),d=await getMessage(r,a,s);t.status(200).send(d)}catch(e){console.log(e,"err"),t.status(400).send(e)}}),router.post("/api/message/read",async(e,t)=>{try{var a=RequestToId(e),s=dataDecrypt(e.body.data).messageId,r=await readMessage(a,s);t.status(200).send(r)}catch(e){}}),router.post("/api/message/delete",async(e,t)=>{try{var a=RequestToId(e),s=dataDecrypt(e.body.data).deleteData,r=await deleteMessage(a,s);t.status(200).send(r)}catch(e){}}),router.post("/api/message/post",async(e,t)=>{try{var a=RequestToId(e),s={...dataDecrypt(e.body.data),id:a},r=await postMessage(s);t.status(200).send(r)}catch(e){}}),module.exports=router;// build date : 2024. 12. 13. 오전 10:11:20